    DROP DATABASE IF EXISTS Recycle_AM;
    CREATE DATABASE Recycle_AM;
    USE Recycle_AM;

    CREATE TABLE article(
        id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT
        , regDate DATETIME NOT NULL
        , updateDate DATETIME NOT NULL
        , title VARCHAR(50) NOT NULL
        , content TEXT NOT NULL
    );

    ALTER TABLE article ADD COLUMN memberId INT UNSIGNED NOT NULL AFTER updateDate;
    ALTER TABLE article ADD COLUMN boardId INT UNSIGNED NOT NULL AFTER memberId;
    ALTER TABLE article ADD COLUMN views INT UNSIGNED NOT NULL DEFAULT 0;
    ALTER TABLE article ADD COLUMN thumbnail VARCHAR(255);

    CREATE TABLE `member`(
        id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT
        , regDate DATETIME NOT NULL
        , updateDate DATETIME NOT NULL
        , loginId VARCHAR(50) NOT NULL UNIQUE
        , loginPw VARCHAR(100) NOT NULL
        , `name` VARCHAR(50) NOT NULL
        , email VARCHAR(50) NOT NULL
        , address VARCHAR(100) NOT NULL
    );

    ALTER TABLE `member` ADD COLUMN authLevel INT UNSIGNED NOT NULL DEFAULT 1 COMMENT '관리자 = 0, 사용자 = 1';

    CREATE TABLE board(
        id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT
        , `name` VARCHAR(50) NOT NULL
    );

    CREATE TABLE likePoint(
        memberId INT UNSIGNED NOT NULL
        , relTypeCode VARCHAR(20) NOT NULL
        , relId INT UNSIGNED NOT NULL
    );

    CREATE TABLE reply(
       id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT
       , regDate DATETIME NOT NULL
       , updateDate DATETIME NOT NULL
       , relTypeCode VARCHAR(20) NOT NULL
       , relId INT UNSIGNED NOT NULL
       , memberId INT UNSIGNED NOT NULL
       , content VARCHAR(200) NOT NULL
    );

    CREATE TABLE wasteGuide (
        id INT PRIMARY KEY AUTO_INCREMENT
        , label VARCHAR(100) NOT NULL
        , ko_label VARCHAR(100) NOT NULL      -- YOLO에서 오는 정확한 객체 이름
        , category VARCHAR(50)                -- 대분류 (예: bottle, can)
        , guide TEXT NOT NULL                 -- 분리배출 가이드 설명
        , thumbnail VARCHAR(255)              -- 대표 이미지 파일 경로
        , regDate DATETIME DEFAULT NOW()
        , updateDate DATETIME DEFAULT NOW()    -- 등록일
    );

    INSERT INTO article
        SET regDate = NOW()
            , updateDate = NOW()
            , memberId = 1
            , boardId = 1
            , title = '공지1'
            , content = '공지내용1';
            
    INSERT INTO article
        SET regDate = NOW()
            , updateDate = NOW()
            , memberId = 1
            , boardId = 2
            , title = '제목2'
            , content = '내용2';

    INSERT INTO article
        SET regDate = NOW()
            , updateDate = NOW()
            , memberId = 2
            , boardId = 3
            , title = '제목3'
            , content = '내용3';

    INSERT INTO `member`
        SET regDate = NOW()
            , updateDate = NOW()
            , loginId = 'admin'
            , loginPw = SHA2('admin', 256)
            , `name` = '관리자'
            , email = '123@naver.com'
            , address = '대전광역시 서구 둔산동'
            , authLevel = 0;
            
    INSERT INTO `member`
        SET regDate = NOW()
            , updateDate = NOW()
            , loginId = 'test1'
            , loginPw = SHA2('test1', 256)
            , `name` = '유저1'
            , email = '123@naver.com'
            , address = '서울특별시 강남구 도곡동';

    INSERT INTO `member`
        SET regDate = NOW()
            , updateDate = NOW()
            , loginId = 'test2'
            , loginPw = SHA2('test2', 256)
            , `name` = '유저2'
            , email = '123@naver.com'
            , address = '서울특별시 강동구 천호동';
            
    INSERT INTO board
        SET `name` = '공지사항';

    INSERT INTO board
        SET `name` = '팁/정보';
        
    INSERT INTO board
        SET `name` = '질의응답';

    INSERT INTO board
        SET `name` = '오류 신고';
        
    INSERT INTO likePoint
        SET memberId = 2
            , relTypeCode = 'article'
            , relId = 2;

    INSERT INTO likePoint
        SET memberId = 3
            , relTypeCode = 'article'
            , relId = 2;
            
    INSERT INTO likePoint
        SET memberId = 2
            , relTypeCode = 'article'
            , relId = 3;
            
    INSERT INTO likePoint
        SET memberId = 3
            , relTypeCode = 'article'
            , relId = 1;


    INSERT INTO wasteGuide (label, ko_label, category, guide, thumbnail) VALUES
    ('petbottle', '페트병', '플라스틱', '내용물을 비우고 라벨을 제거한 후 압착하여 투명 페트병 전용 수거함에 배출하세요.', '/resource/imgs/petbottle.png'),
    ('can', '캔', '금속', '음료 캔은 물로 헹군 후 라벨과 뚜껑을 제거하고 압착해서 배출하세요.', '/resource/imgs/can.png'),
    ('glassbottle', '유리병', '유리', '내용물을 비우고 물로 헹군 후 라벨 제거 후 배출하세요. 색상별 분리 필요 시 지자체 기준 확인.', '/resource/imgs/glassbottle.png'),
    ('papercup', '종이컵', '종이', '음료 잔여물을 버리고 깨끗이 헹군 후 종이류와 혼합되지 않도록 별도 배출하세요. *플라스틱 뚜껑이 있다면 뚜껑은 플라스틱으로 배출하는 센스!', '/resource/imgs/papercup.png'),
    ('paperbox', '종이박스', '종이', '테이프, 스티커 등 이물질 제거 후 접어서 배출하세요.', '/resource/imgs/paperbox.png'),
    ('plasticbag', '비닐봉투', '플라스틱', '내용물을 비우고 물기를 제거한 깨끗한 비닐만 분리배출 가능합니다.', '/resource/imgs/plasticbag.png'),
    ('plasticcontainer', '플라스틱 용기', '플라스틱', '내용물을 비우고 이물질 제거 후 플라스틱류로 배출하세요. 뚜껑과 몸체가 다른 재질이면 분리하세요.', '/resource/imgs/plasticcontainer.png'),
    ('paperpack', '종이팩', '종이', '내용물을 비우고 물로 헹군 후 펼쳐서 종이팩 전용 수거함에 배출하거나 마트 등 교환 서비스 활용하세요.', '/resource/imgs/paperpack.png'),
    ('paperprint', '신문/잡지', '종이', '깨끗한 신문만 끈으로 묶어 배출하세요. 코팅지나 전단지는 일반쓰레기입니다.', '/resource/imgs/paperprint.png'),
    ('styrofoam', '스티로폼', '플라스틱', '이물질 없고 깨끗한 흰색 스티로폼만 분리배출 가능. 테이프 제거 필수.', '/resource/imgs/styrofoam.png'),
    ('aluminumfoil', '알루미늄 호일', '금속', '기름이나 음식물이 묻은 경우 일반쓰레기로, 깨끗한 상태만 금속류로 배출하세요.', '/resource/imgs/aluminumfoil.png'),
    ('bubblewrap', '에어캡(뽁뽁이)', '플라스틱', '깨끗한 상태라면 비닐류로 분리배출 가능합니다. 이물질 있으면 일반쓰레기로 버리세요.', '/resource/imgs/bubblewrap.png'),
    ('battery', '건전지', '위험물질', '폐건전지는 따로 수거함에 배출하세요. 일반쓰레기 절대 금지!', '/resource/imgs/battery.png'),
    ('lightbulb', '형광등', '위험물질', '형광등은 지정된 수거함에 따로 배출하고 깨진 경우 신문지에 감싸 일반쓰레기로 처리하세요.', '/resource/imgs/lightbulb.png'),
    ('toothpaste', '치약 튜브', '일반쓰레기', '플라스틱처럼 보여도 재질이 혼합되어 있어 일반쓰레기로 배출해야 합니다.', '/resource/imgs/toothpaste.png'),
    ('clothes', '헌 옷', '의류', '상태가 양호한 의류는 의류 수거함에 배출하세요. 오염되거나 젖은 옷은 일반쓰레기입니다.', '/resource/imgs/clothes.png'),
    ('umbrella', '고장난 우산', '일반쓰레기', '금속과 천 재질이 혼합되어 분리배출이 어려운 경우 일반쓰레기로 배출하세요. *천과 뼈대를 안전하게 분리할 수 있다면 천은 일반쓰레기, 우산대는 캔류/고철.', '/resource/imgs/umbrella.png'),
    ('ceramics', '도자기/깨진 그릇', '일반쓰레기', '도자기나 유리컵 등은 재활용이 불가능하므로 신문지에 감싸 일반쓰레기로 버리세요.', '/resource/imgs/ceramics.png'),
    ('icepack', '아이스팩', '일반쓰레기', '내용물 젤은 일반쓰레기로 배출하고, 외부 비닐은 깨끗하면 비닐류로 분리배출하세요.', '/resource/imgs/icepack.png'),
    ('eggcarton', '계란판', '종이', '종이 재질의 계란판은 이물질이 없으면 종이류로 분리배출 가능하고, 플라스틱 재질은 플라스틱류로 분리배출하세요.', '/resource/imgs/eggcarton.png');

    CREATE TABLE searchLog (
        id INT PRIMARY KEY AUTO_INCREMENT,
        label VARCHAR(100) NOT NULL,
        ko_label VARCHAR(100) NOT NULL,       -- 검색어 (label, category 등)
        category VARCHAR(20),             -- 검색 종류 (예: 'label', 'category')
        search_time DATETIME DEFAULT NOW()   -- 검색 시각
    );



    SELECT * FROM article;
    SELECT * FROM `member`;
    SELECT * FROM board;
    SELECT * FROM likePoint;
    SELECT * FROM reply;
    SELECT * FROM wasteGuide;
    SELECT * FROM searchLog;



    /*페이징 테스트용 더미데이터
    insert into article (regDate, updateDate, memberId, boardId, title, content)
    select now(), now(), FLOOR(RAND() * 3) + 1, FLOOR(RAND() * 4) + 1, concat('테스트제목', substr(RAND(), 1, 5)), CONCAT('테스트내용', SUBSTR(RAND(), 1, 5)) from article;
    */